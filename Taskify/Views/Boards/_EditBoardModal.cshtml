@model Taskify.Models.BoardEditViewModel

<div class="modal fade" id="editBoardModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title-wrapper">
                    <div class="modal-icon" style="background: rgba(255,255,255,0.2);">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7" />
                            <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z" />
                        </svg>
                    </div>
                    <h5 class="text-white">Edit Board</h5>
                </div>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>

            <div class="modal-body">
                <form id="editBoardForm" asp-action="Edit" asp-controller="Boards" method="post">
                    <input type="hidden" id="editBoardId" asp-for="Id" />

                    <div class="form-group mb-4">
                        <label asp-for="Name" class="form-label fw-bold">Board Name <span class="text-danger">*</span></label>
                        <input type="text" asp-for="Name" id="editBoardName" class="form-control" required />
                        <span class="form-text text-muted">Update your board name</span>
                    </div>

                    <div class="form-group">
                        <label asp-for="Description" class="form-label fw-bold">Description</label>
                        <textarea asp-for="Description" id="editBoardDescription" class="form-control" rows="3"></textarea>
                    </div>
                </form>
            </div>

            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="submit" form="editBoardForm" class="btn btn-primary">Save Changes</button>
            </div>
        </div>
    </div>
</div>

<script>
    // Hàm này được gọi từ nút Edit ở trang Index
    function openEditBoardModal(id, name, description) {
        // 1. Điền dữ liệu vào form
        document.getElementById('editBoardId').value = id;
        document.getElementById('editBoardName').value = name;

        // Nếu có description thì điền, không thì để trống
        const descInput = document.getElementById('editBoardDescription');
        if(descInput) descInput.value = description || '';

        // 2. Mở Modal
        const modalEl = document.getElementById('editBoardModal');
        const modal = new bootstrap.Modal(modalEl);
        modal.show();
    }
</script>